<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="../lib/Hui-iconfont/1.0.8/iconfont.css" />
<link rel="stylesheet" type="text/css" href="../static/h-ui/css/H-ui.min.css"/>
<link rel="stylesheet" type="text/css" href="../static/h-ui.admin/css/H-ui.admin.css"/>
</head>
<body>
	<div class="page-container">
		<div class="text-c" style="margin-top: 20px;">
			投注时间：
            <input id="datemin" name="datemin" type="text" onfocus="WdatePicker({ maxDate:'#F{$dp.$D(\'datemax\')||\'%y-%M-%d\'}' })" class="input-text Wdate" style="width:180px;">-
            <input id="datemax" name="datemax" type="text" onfocus="WdatePicker({ minDate:'#F{$dp.$D(\'datemin\')}',maxDate:'%y-%M-%d' })" id="datemax" class="input-text Wdate" style="width:180px;">
			<button id="searchBettingBtn" class="btn btn-success"><i class="Hui-iconfont">&#xe665;</i>查询</button>
		</div>
		<div class="cl pd-5 bg-1 bk-gray mt-20"><span class="l"></span></div>
		<table id="bettingList" class="table table-border table-bordered table-bg">
			<thead>
				<tr><th scope="col" colspan="10">注单列表</th></tr>
				<tr class="text-c">
					<th>编号</th>
					<th>账号</th>
					<th>期数</th>
					<th>彩种</th>
					<th>投注项</th>
					<th>赔率</th>
					<th>投注金额</th>
					<th>投注时间</th>
					<th>结算状态</th>
					<th>结算金额</th>
					<th>结算时间</th>
				</tr>
			</thead>
			<tbody></tbody>
		</table>
	</div>
	
	<!--_footer 作为公共模版分离出去-->
	<script type="text/javascript" src="../lib/jquery/1.9.1/jquery.min.js"></script>
	<script type="text/javascript" src="../lib/layer/2.4/layer.js"></script>
	<script type="text/javascript" src="../lib/datatables/1.10.0/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="../lib/My97DatePicker/4.8/WdatePicker.js"></script>
	<script type="text/javascript" src="../static/h-ui/js/H-ui.min.js"></script>
	<script type="text/javascript" src="../static/h-ui.admin/js/H-ui.admin.js"></script>
	<script type="text/javascript" src="../js/dataTableUtil.js"></script>
	<script type="text/javascript" src="../js/public.js"></script>
	<!--/_footer 作为公共模版分离出去-->
	
	<!--请在下方写此页面业务相关的脚本-->
	<script type="text/javascript">
		// 表单中字段的key
	    var columns = [
	        {data : 'id'},
	        {data : 'userName'},
	        {data : 'period'},
	        {data : 'lotteryName'},
	        {data : 'projectName'},
	        {data : 'odds'},
	        {data : 'money'},
	        {data : 'bettingTime'},
	        {
	            data: function (e) {
	                var element = "";
	                if (e.square == 0) {
	                    element = '<span class="label label-danger radius">未结算</span>';
	                } else {
	                    element = '<span class="label label-success radius">已结算</span>';
	                }
	                return element;
	            }
	        },
	        {data : 'squareMoney'},
	        {data : 'squareTime'}
	    ];
		
		$('#searchBettingBtn').click(function() {
			var token = window.localStorage.getItem('manager-token');
			if(token && token.length > 0){
				$.ajax({
					url: '../betting/bettingPage',
					type: 'POST',
					dataType: 'json',
					async: true,
					data: {
						'pageNum': 1,
					},
					beforeSend: function(xhr) {
						xhr.setRequestHeader('Authorization', 'Basic'+token)
					},
					success: function (jsonResult) {
						if(jsonResult.code == 200){
                            bindJsonTable("bettingList", jsonResult.data, columns);
                        }else{
                            layer.msg(jsonResult.message,{icon:2,time:2000});
                        }
					},
					error: function (request, error) {
						layer.msg('获取用户列表数据失败!',{icon:2,time:1000});
					}
				});
			}else{
				alert('请先登录!');
			}
		});
	</script>
</body>
</html>